"use strict";function Goodslist(){this.init(),this.oGoodslist=document.getElementById("goodslist"),this.oBtnList=document.querySelector(".btnList"),this.oLast=document.querySelector(".last"),this.oFirst=document.querySelector(".first"),this.iNow=1}Goodslist.prototype={init:function(){this.getGoodsdata()},getGoodsdata:function(){axios({method:"get",url:"http://localhost/weijinggit/src/php/getgoods.php"}).then(this.getGoodsdataSuccess.bind(this))},getGoodsdataSuccess:function(t){this.data=t,this.pages=Math.ceil(this.data.length/8);for(var i=0;i<this.pages;i++)this.a=document.createElement("a"),this.a.innerText=i+1,this.a.className="page",this.oBtnList.insertBefore(this.a,this.oLast);this.render(1),this.clickoBtnList(),this.clickoGoodslist()},render:function(t){for(var i="",s=8*(t-1);s<Math.min(8*t,this.data.length);s++)i+='<li data-id="'.concat(this.data[s].gid,'">\n            <img src="imgs/').concat(this.data[s].gimg,'">\n            <h4>').concat(this.data[s].gh4,"</h4>\n            <p>").concat(this.data[s].gp,"</p>\n            <span>").concat(this.data[s].gprice,'</span>\n            <a href="#" class="js_jumpitem">立即购买</a>\n        </li>');this.oGoodslist.innerHTML=i},clickoBtnList:function(){this.oBtnList.addEventListener("click",this.clickoBtnListCb.bind(this))},clickoBtnListCb:function(t){var i=(t=t||event).target||t.srcElement;if("A"==i.tagName&&"page"==i.className){var s=Number(i.innerText);this.iNow=s,console.log("点击页码"+this.iNow),this.render(s)}"A"==i.tagName&&"first"==i.className&&(1==this.iNow?(this.iNow=1,console.log("点击上一页"+this.iNow)):(this.iNow--,console.log("点击上一页--"+this.iNow)),this.render(this.iNow)),"A"==i.tagName&&"last"==i.className&&(this.iNow==this.pages?(this.iNow=this.pages,console.log("点击下一页"+this.iNow)):(this.iNow++,console.log("点击下一页++"+this.iNow)),this.render(this.iNow))},clickoGoodslist:function(){this.oGoodslist.addEventListener("click",this.clickoGoodslistCb.bind(this))},clickoGoodslistCb:function(t){var i=(t=t||event).target||t.srcElement;if("A"==i.tagName&&"js_jumpitem"==i.className){var s=i.parentNode.getAttribute("data-id");location.href="detail.html?id="+s}}},new Goodslist;